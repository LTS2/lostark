<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8"/>
    <title>모집글 상세 보기</title>
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1.0"/>
    <link rel="stylesheet" href="/css/recruitment/recruitment.css"/> <!-- 스타일 시트 경로 -->
    <th:block th:replace="~{fragments/config::configFragment}"></th:block>
    <link rel="stylesheet" th:href="@{/css/recruitment/detail.css}">
</head>

<body>
<!-- Header -->
<th:block th:replace="~{fragments/header :: headerFragment}"></th:block>

<main style="margin-top: 20px;" id="side-con">

    <!-- Main Content -->
    <section class="content" id="activity-content">
        <div>
            <h1>모집글 상세 보기</h1>
        </div>
        <div class="writer-con">
            <div class="profile-picture">
                <img src="/images/bono.jpg" alt="프로필 사진" class="profile-img">
            </div>

            <div class="writer-info">
                <span class="writer-name">작성자 : </span>
                <span class="writer-name">김개똥</span>
            </div>

            <div class="guestbook-button">
                <button type="button" class="home-btn">HOME 가기</button>

                <button type="button"
                        class="write-guestbook-btn"
                        th:if="${session.user == null}"
                        onclick="alert('로그인 후 이용해주세요');">
                    방명록 남기기
                </button>

                <button type="button"
                        class="write-guestbook-btn"
                        th:if="${session.user != null}"
                        onclick="openModal()">
                    방명록 남기기
                </button>
            </div>
        </div>

        <!-- 방명록 작성 모달창 -->
        <div id="guestbook-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="dashboard-write">
                    <div class="guest-textarea">
                        <label for="guestbook-comment" class="screen_out">방명록 작성</label>
                        <textarea id="guestbook-comment" placeholder="내용을 입력하세요." class="guest-textarea-input"></textarea>
                        <div class="guest-submit-con">
                            <button type="submit" class="guest-submit-btn" onclick="submitGuestbook()">등록</button>
                        </div>
                    </div>
                    <br>
                    <button class="modal-close" onclick="closeModal()">닫기</button>
                </div>
            </div>
        </div>

        <input type="hidden" id="username" th:value="${session.user.getUsername()}">
        <input type="hidden" id="userId" th:value="${session.user.getId()}">
        <!-- 모집글 작성자 아이디 -->
        <input type="hidden" id="targetUserId" th:value="${recruitment.getUser().getId()}">

        <div class="details-box">
            <!-- 모집글 상세 보기 -->
            <div class="details-title" th:if="${recruitment != null}" th:text="${recruitment.title}">제목</div>
            <div class="details-content">
                <p><strong>목표:</strong> <span th:text="${recruitment.goal != null ? recruitment.goal : '정보 없음'}"></span></p>
                <p><strong>시간:</strong> <span th:text="${recruitment.time != null ? recruitment.time : '정보 없음'}"></span></p>
                <p><strong>모집 인원:</strong> <span th:text="${recruitment.recruitmentCount != null ? recruitment.recruitmentCount : '정보 없음'}"></span></p>
                <p><strong>숙련도:</strong> <span th:text="${recruitment.proficiency != null ? recruitment.proficiency : '정보 없음'}"></span></p>
                <p><strong>도전 시간:</strong> <span th:text="${recruitment.challengeTime != null ? recruitment.challengeTime : '정보 없음'}"></span></p>
                <p><strong>출발 날짜:</strong> <span th:text="${recruitment.startDate != null ? recruitment.startDate : '정보 없음'}"></span></p>
                <!-- 필요에 따라 채팅방 링크 추가 -->
                <a href="#" id="createChatRoomLink">지원하기</a>
            </div>
        </div>
    </section>
</main>

<script src="/js/recruitment/recruitment.js"></script>
<script th:src="@{/js/recruitment/detail.js}"></script>

<!-- Footer -->
<th:block th:replace="~{fragments/footer :: footerFragment}"></th:block>
</body>
</html>